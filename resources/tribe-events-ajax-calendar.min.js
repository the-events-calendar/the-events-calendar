(function(n,q,b,d,g,f,a,h,k){b(q).ready(function(){function s(c){"change_view"!=tribe_events_bar_action&&(c.preventDefault(),a.ajax_running||(m.val().length?a.date=m.val():r||(a.date=d.cur_date.slice(0,-3)),d.cur_url=a.filter_cats?b("#tribe-events-header").data("baseurl")+a.date+"/":p+a.date+"/",a.popping=!1,f.pre_ajax(function(){l()})))}function l(){b(".tribe-events-calendar").tribe_spin();a.pushcount=0;a.ajax_running=!0;a.popping||(a.params={action:"tribe_calendar",eventDate:a.date},a.category&&
(a.params.tribe_event_category=a.category),a.url_params={},b(g).trigger("tribe_ev_serializeBar"),a.params=b.param(a.params),a.url_params=b.param(a.url_params),b(g).trigger("tribe_ev_collectParams"),0<a.pushcount||a.filters?(a.do_string=!0,a.pushstate=!1):(a.do_string=!1,a.pushstate=!0));h.pushstate&&!a.filter_cats?(k&&debug.time("Month View Ajax Timer"),b(g).trigger("tribe_ev_ajaxStart").trigger("tribe_ev_monthView_AjaxStart"),b.post(TribeCalendar.ajaxurl,a.params,function(c){a.initial_load=!1;f.enable_inputs("#tribe_events_filters_form",
"input, select");if(c.success){a.ajax_running=!1;d.ajax_response={total_count:"",view:c.view,max_pages:"",tribe_paged:"",timestamp:(new Date).getTime()};k&&0===c.html&&debug.warn("Month view ajax had an error in the query and returned 0.");var e="",e=b.isFunction(b.fn.parseHTML)?b.parseHTML(c.html):c.html;b("#tribe-events-content").replaceWith(e);a.page_title=b("#tribe-events-header").data("title");q.title=a.page_title;a.do_string&&(d.cur_url=d.cur_url+"?"+a.url_params,history.pushState({tribe_date:a.date,
tribe_params:a.params},a.page_title,d.cur_url));a.pushstate&&history.pushState({tribe_date:a.date,tribe_params:a.params},a.page_title,d.cur_url);b(g).trigger("tribe_ev_ajaxSuccess").trigger("tribe_ev_monthView_ajaxSuccess");k&&debug.timeEnd("Month View Ajax Timer")}})):n.location=a.do_string?d.cur_url+"?"+a.url_params:d.cur_url}var p=b("#tribe-events-header .tribe-events-nav-next a").attr("href").slice(0,-8),e=f.get_url_param("tribe-bar-date"),m=b("#tribe-bar-date"),r=!1;b(".tribe-events-calendar").length&&
b("#tribe-events-bar").length&&(e&&7<e.length)&&(b("#tribe-bar-date-day").val(e.slice(-3)),m.val(e.substring(0,7)));var t=m.bootstrapDatepicker({format:"yyyy-mm",showAnim:"fadeIn",viewMode:"months"}).on("changeDate",function(c){var e=c.date.getFullYear(),g=("0"+(c.date.getMonth()+1)).slice(-2);t.hide();r=!0;f.update_picker(c.date);a.date=e+"-"+g;if((h.no_bar()||h.live_ajax()&&h.pushstate)&&!a.ajax_running)d.cur_url=a.filter_cats?b("#tribe-events-header").data("baseurl")+a.date+"/":p+a.date+"/",a.popping=
!1,f.pre_ajax(function(){l()})}).data("datepicker");h.pushstate&&!h.map_view()&&(e="action=tribe_calendar&eventDate="+b("#tribe-events-header").data("date"),d.params.length&&(e=e+"&"+d.params),history.replaceState({tribe_params:e},a.page_title,location.href),b(n).on("popstate",function(b){if(b=b.originalEvent.state)a.do_string=!1,a.pushstate=!1,a.popping=!0,a.params=b.tribe_params,f.pre_ajax(function(){l()}),f.set_form(a.params)}));b("#tribe-events").on("click",".tribe-events-sub-nav a",function(c){c.preventDefault();
a.ajax_running||(c=b(this),a.date=c.data("month"),f.update_picker(a.date),d.cur_url=a.filter_cats?b("#tribe-events-header").data("baseurl"):c.attr("href"),a.popping=!1,f.pre_ajax(function(){l()}))}).on("click","td.tribe-events-thismonth",function(a){a.preventDefault();a=b(this).find('[id^="tribe-events-daynum"] a').attr("href");"undefined"!==typeof a&&(n.location=a)}).on("click","td.tribe-events-thismonth a",function(a){a.stopPropagation()});f.snap("#tribe-bar-form","body","#tribe-events-footer .tribe-events-nav-previous a, #tribe-events-footer .tribe-events-nav-next a");
b("form#tribe-bar-form").on("submit",function(a){s(a)});b(g).on("tribe_ev_runAjax",function(){l()});b(g).on("tribe_ev_updatingRecurrence",function(){a.date=b("#tribe-events-header").data("date");d.cur_url=a.filter_cats?b("#tribe-events-header").data("baseurl")+a.date+"/":p+a.date+"/";a.popping=!1});k&&debug.info("TEC Debug: tribe-events-ajax-calendar.js successfully loaded, Tribe Events Init finished");k&&debug.timeEnd("Tribe JS Init Timer")})})(window,document,jQuery,tribe_ev.data,tribe_ev.events,
tribe_ev.fn,tribe_ev.state,tribe_ev.tests,tribe_debug);
