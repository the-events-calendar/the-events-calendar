Object.prototype.hasOwnProperty.call(window,"tribe_ev")&&(tribe_ev.geoloc={map:[],geocoder:[],geocodes:[],bounds:[],markers:[],refine:!1});
(function(r,p,b,m,g,e,f,n,q){b.extend(tribe_ev.fn,{has_address:function(b,a){for(var c=0;c<a.length;c++)if(a[c].formatted_address==b)return!0;return!1},pre_ajax:function(d){if(b("#tribe-bar-geoloc").length){var a=b("#tribe-bar-geoloc").val();a.length?g.process_geocoding(a,function(c){e.geocodes=c;if(1<e.geocodes.length&&!g.has_address(a,e.geocodes))g.print_geo_options();else{var h=c[0].geometry.location.lat();c=c[0].geometry.location.lng();h&&b("#tribe-bar-geoloc-lat").val(h);c&&b("#tribe-bar-geoloc-lng").val(c);
d&&"function"===typeof d&&(b("#tribe_events_filter_item_geofence").length&&b("#tribe_events_filter_item_geofence").show(),d())}}):(b("#tribe-bar-geoloc-lat, #tribe-bar-geoloc-lng").val(""),d&&"function"===typeof d&&(b("#tribe_events_filter_item_geofence").length&&(b("#tribe_events_filter_item_geofence input").prop("checked",!1),b("#tribe_events_filter_item_geofence").hide().find("select").prop("selectedIndex",0)),d()))}else d&&"function"===typeof d&&d()},print_geo_options:function(){b("#tribe-geo-links").empty();
b("#tribe-geo-options").show();var d=[];e.refine=!0;for(var a=0;a<e.geocodes.length;a++){var c=e.geocodes[a].formatted_address;d[c]||(d[c]=!0,b("<a/>").text(c).attr("href","#").addClass("tribe-geo-option-link").data("index",a).appendTo("#tribe-geo-links"),n.map_view()&&g.map_add_marker(e.geocodes[a].geometry.location.lat(),e.geocodes[a].geometry.location.lng(),c))}e.refine=!1},pro_tooltips:function(){b("#tribe-events").on("mouseenter",'div[id*="tribe-events-event-"], div[id*="tribe-events-daynum-"]:has(a), div.event-is-recurring',
function(){var d=0,a=b(this);if(b("body").hasClass("tribe-events-week")){var c=a.find(".tribe-events-tooltip");if(a.parents(".tribe-grid-allday").length)d=a.outerHeight()+6,c.css("bottom",d).show();else{var h=b(".tribe-week-grid-wrapper"),k=a.parent(),d=k.parent(),l=Math.ceil(d.width()),e=Math.ceil(a.width()),f=Math.ceil(c.outerWidth()),d=h.height(),g=h.scrollTop(),h=k.position(),a=a.position(),a=Math.ceil(a.top),a=g-a,k=k.hasClass("tribe-events-right"),g={};c.hasClass("hovered")||c.data("ow",f).addClass("hovered");
l=k?Math.ceil(h.left)-20:l-e-Math.ceil(h.left);f=f>=l?l:c.data("ow")>l?l:c.data("ow");g=k?{right:e+20,bottom:"auto",width:f+"px"}:{left:e+20,bottom:"auto",width:f+"px"};c.css(g);e=c.height();0<=a?a+=5:(d=a+d,a=e>d?d-e-8:5);c.css("top",a).show()}}})},process_geocoding:function(b,a){var c={address:b,bounds:new google.maps.LatLngBounds(new google.maps.LatLng(TribeEventsPro.geocenter.min_lat,TribeEventsPro.geocenter.min_lng),new google.maps.LatLng(TribeEventsPro.geocenter.max_lat,TribeEventsPro.geocenter.max_lng))};
e.geocoder.geocode(c,function(b,c){if(c==google.maps.GeocoderStatus.OK)return a(b),b;c==google.maps.GeocoderStatus.ZERO_RESULTS&&GeoLoc.map_view&&spin_end();return c})},set_recurrence:function(b){b?(f.recurrence=!0,tribe_storage&&tribe_storage.setItem("tribeHideRecurrence","1")):(f.recurrence=!1,tribe_storage&&tribe_storage.setItem("tribeHideRecurrence","0"))}});b.extend(tribe_ev.tests,{hide_recurrence:function(){return b("#tribeHideRecurrence:checked").length?!0:!1}});b(p).ready(function(){function d(){var a=
p.URL,c="?";0<a.indexOf("?")&&(c="&");a=a+c+"ical=1&tribe_display="+f.view;b("a.tribe-events-ical").attr("href",a)}b(".tribe-bar-geoloc-filter").length&&b(".tribe-bar-geoloc-filter").append('<div id="tribe-geo-options"><div id="tribe-geo-links"></div></div>');var a=b("#tribe-events"),c=b("#tribe-bar-geoloc"),h=b("#tribe-geo-options"),k=!1;g.pro_tooltips();n.hide_recurrence()&&g.set_recurrence(!0);b(m).on("tribe_ev_ajaxSuccess",function(){d()});d();f.recurrence=n.hide_recurrence();a.on("click","#tribeHideRecurrence",
function(){f.popping=!1;f.do_string=!0;f.paged=1;k=b(this).is(":checked")?!0:!1;g.set_recurrence(k);b(m).trigger("tribe_ev_updatingRecurrence").trigger("tribe_ev_runAjax")});b(m).on("tribe_ev_preCollectBarParams",function(){c.length&&(c.val().length?"map"===f.view_target&&(f.url_params.action="tribe_geosearch"):b("#tribe-bar-geoloc-lat, #tribe-bar-geoloc-lng").val(""));tribe_storage&&"1"===tribe_storage.getItem("tribeHideRecurrence")&&("month"!==f.view_target&&"week"!==f.view_target)&&(f.url_params.tribeHideRecurrence=
"1")});n.map_view()||(h.length&&(a.on("click",".tribe-geo-option-link",function(a){a.preventDefault();a.stopPropagation();a=b(this);b(".tribe-geo-option-link").removeClass("tribe-option-loaded");a.addClass("tribe-option-loaded");c.val(a.text());b("#tribe-bar-geoloc-lat").val(e.geocodes[a.data("index")].geometry.location.lat());b("#tribe-bar-geoloc-lng").val(e.geocodes[a.data("index")].geometry.location.lng());g.pre_ajax(function(){b(m).trigger("tribe_ev_runAjax");h.hide()})}),b(p).on("click",function(a){h.hide()})),
g.snap("#tribe-geo-wrapper","#tribe-geo-wrapper","#tribe-events-footer .tribe-events-nav-previous a, #tribe-events-footer .tribe-events-nav-next a"));q&&debug.info("TEC Debug: tribe-events-pro.js successfully loaded")})})(window,document,jQuery,tribe_ev.events,tribe_ev.fn,tribe_ev.geoloc,tribe_ev.state,tribe_ev.tests,tribe_debug);
