!function(a,b,c,d,e,f,g,h,i,j){c(b).ready(function(){function j(a){if("change_view"!=tribe_events_bar_action){if(a.preventDefault(),g.ajax_running)return;var c=b.location.pathname;g.paged=1,c.match(/\/all\/$/)?g.view="all":g.view="list",g.popping=!1,f.pre_ajax(function(){k()})}}function k(){var j=c("#tribe-events-header");if(g.ajax_running=!0,!g.popping){g.filter_cats&&(d.cur_url=j.data("baseurl"));var k=c("#tribe-events-list-hash").val();g.params={action:"tribe_list",tribe_paged:g.paged,tribe_event_display:g.view},g.url_params={tribe_paged:g.paged,tribe_event_display:g.view};var l=b.location.pathname;if((l.match(/\/all\/$/)||d.cur_url.match(/tribe_post_parent=[0-9]+/))&&(g.url_params.tribe_event_display="all",g.params.tribe_post_parent=parseInt(j.closest("#tribe-events-content").find("[data-parent-post-id]:first").data("parent-post-id"),10)),""===tribe_js_config.permalink_settings&&(g.url_params.eventDisplay="all"===g.url_params.tribe_event_display?"all":"list"),k.length&&(g.params.hash=k),d.default_permalinks&&!g.url_params.hasOwnProperty("post_type")&&(g.url_params.post_type=i.events_post_type),g.category&&(g.params.tribe_event_category=g.category),c(e).trigger("tribe_ev_serializeBar"),f.invalid_date_in_params(g.params))return void(g.ajax_running=!1);c("#tribe-events-content .tribe-events-loop").tribe_spin(),g.params=c.param(g.params),g.url_params=c.param(g.url_params),c(e).trigger("tribe_ev_collectParams"),g.pushstate=!1,g.do_string=!0}h.pushstate&&!g.filter_cats?(c(e).trigger("tribe_ev_ajaxStart").trigger("tribe_ev_listView_AjaxStart"),c.post(TribeList.ajaxurl,g.params,function(a){if(g.initial_load=!1,f.enable_inputs("#tribe_events_filters_form","input, select"),a.success){g.ajax_running=!1,d.ajax_response={total_count:parseInt(a.total_count),view:a.view,max_pages:a.max_pages,tribe_paged:a.tribe_paged,timestamp:(new Date).getTime()},c("#tribe-events-list-hash").val(a.hash);var h=c.parseHTML(a.html);c("#tribe-events-content").replaceWith(h),0===a.total_count&&c("#tribe-events-header .tribe-events-sub-nav").empty(),g.page_title=c("#tribe-events-header").data("title"),b.title=g.page_title,g.do_string&&history.pushState({tribe_params:g.params,tribe_url_params:g.url_params},g.page_title,d.cur_url+"?"+g.url_params),g.pushstate&&history.pushState({tribe_params:g.params,tribe_url_params:g.url_params},g.page_title,d.cur_url),c(e).trigger("tribe_ev_ajaxSuccess").trigger("tribe_ev_listView_AjaxSuccess")}})):g.url_params.length?a.location=d.cur_url+"?"+g.url_params:a.location=d.cur_url}var l=f.get_url_param("tribe_paged"),m=c("#tribe-events > .tribe-events-venue");if(l&&(g.paged=l),h.pushstate&&!h.map_view()){var n="action=tribe_list&tribe_paged="+g.paged;d.params.length&&(n=n+"&"+d.params),g.category&&(n=n+"&tribe_event_category="+g.category),history.replaceState({tribe_params:n,tribe_url_params:d.params},b.title,location.href),c(a).on("popstate",function(a){var b=a.originalEvent.state;b&&!m.length&&(g.do_string=!1,g.pushstate=!1,g.popping=!0,g.params=b.tribe_params,g.url_params=b.tribe_url_params,f.pre_ajax(function(){k()}),f.set_form(g.params))})}c("#tribe-events-content-wrapper").on("click",'ul.tribe-events-sub-nav a[rel="next"]',function(a){if(a.preventDefault(),!g.ajax_running){var b=c(this).attr("href"),e=/tribe_event_display=([^&]+)/gi,h=e.exec(b);c(this).parent().is(".tribe-events-past")?g.view="past":"undefined"!==h[1]?g.view=h[1]:g.view="list",d.cur_url=f.url_path(b),g.paged?g.paged++:g.paged=2,g.popping=!1,f.pre_ajax(function(){k()})}}).on("click",'ul.tribe-events-sub-nav a[rel="prev"]',function(a){if(a.preventDefault(),!g.ajax_running){var b=c(this).attr("href"),e=/tribe_event_display=([^&]+)/gi,h=e.exec(b);c(this).parent().is(".tribe-events-past")?g.view="past":"undefined"!==h[1]?g.view=h[1]:g.view="list",d.cur_url=f.url_path(c(this).attr("href")),g.paged>1&&g.paged--,g.popping=!1,f.pre_ajax(function(){k()})}}),f.snap("#tribe-events-content-wrapper","#tribe-events-content-wrapper","#tribe-events-footer .tribe-events-nav-previous a, #tribe-events-footer .tribe-events-nav-next a"),(h.no_bar()||h.live_ajax()&&h.pushstate)&&c("#tribe-events-bar").on("changeDate","#tribe-bar-date",function(a){h.reset_on()||(g.popping=!1,j(a))}),c("form#tribe-bar-form").on("submit",function(a){g.popping=!1,j(a)}),c(e).on("tribe_ev_runAjax",function(){k()})})}(window,document,jQuery,tribe_ev.data,tribe_ev.events,tribe_ev.fn,tribe_ev.state,tribe_ev.tests,tribe_js_config,tribe_debug);