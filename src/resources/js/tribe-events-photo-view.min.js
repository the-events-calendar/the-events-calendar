!function(e,t,a,r,i,o,n,s,p,_){_&&(a().isotope||debug.warn("TEC Debug: vendor isotope was not loaded before its dependant file tribe-photo-view.js")),a(e).load(function(){var e=(o.get_url_param("tribe_paged"),o.get_url_param("tribe_event_display"),a("#tribe-events-photo-events"));e.hasClass("isotope")&&e.isotope("reLayout")}),a(t).ready(function(){function u(){a(".photo-loader").show(),a("#tribe-events-photo-events").addClass("photo-hidden")}function v(){a(".photo-loader").hide(),a("#tribe-events-photo-events").removeClass("photo-hidden").animate({opacity:"1"},{duration:600})}function b(e){w=e.width(),645>w?e.addClass("photo-two-col"):e.removeClass("photo-two-col")}function l(e){a().isotope?(e.imagesLoaded(function(){e.isotope({transformsEnabled:!1,containerStyle:{position:"relative",overflow:"visible"}},v()),_&&debug.info("TEC Debug: imagesLoaded setup isotope on photo view."),e.resize(function(){b(e),clearTimeout(d),d=setTimeout(function(){e.isotope("reLayout")},400)})}),b(e)):a("#tribe-events-photo-events").removeClass("photo-hidden").css("opacity","1")}function g(e){if("change_view"!=tribe_events_bar_action){if(e.preventDefault(),n.ajax_running)return;n.paged=1,n.view="photo",n.popping=!1,o.pre_ajax(function(){c()})}}function c(){if(!n.popping){n.ajax_running=!0,n.filter_cats&&(r.cur_url=a("#tribe-events-header").data("baseurl"));var v=a("#tribe-events-list-hash").val();if(n.params={action:"tribe_photo",tribe_paged:n.paged,tribe_event_display:n.view},n.url_params={action:"tribe_photo",tribe_paged:n.paged,tribe_event_display:n.view},r.default_permalinks&&(n.url_params.hasOwnProperty("post_type")||(n.url_params.post_type=p.events_post_type),n.url_params.hasOwnProperty("eventDisplay")||(n.url_params.eventDisplay=n.view)),v.length&&(n.params.hash=v),n.category&&(n.params.tribe_event_category=n.category),a(i).trigger("tribe_ev_serializeBar"),a(i).trigger("serialize-bar.tribe"),o.invalid_date_in_params(n.params))return void(n.ajax_running=!1);a("#tribe-events-header").tribe_spin(),u(),n.params=a.param(n.params),n.url_params=a.param(n.url_params),a(i).trigger("tribe_ev_collectParams"),a(i).trigger("collect-params.tribe"),n.pushstate=!1,n.do_string=!0}s.pushstate&&!n.filter_cats?(_&&debug.time("Photo View Ajax Timer"),a(i).trigger("tribe_ev_ajaxStart").trigger("tribe_ev_photoView_AjaxStart"),a(i).trigger("ajax-start.tribe").trigger("photo-view-ajax-start.tribe"),a.post(TribePhoto.ajaxurl,n.params,function(e){if(n.initial_load=!1,o.enable_inputs("#tribe_events_filters_form","input, select"),e.success){n.ajax_running=!1,r.ajax_response={total_count:parseInt(e.total_count),view:e.view,max_pages:e.max_pages,tribe_paged:e.tribe_paged,timestamp:(new Date).getTime()},a("#tribe-events-list-hash").val(e.hash);var s=a.parseHTML(e.html);a("#tribe-events-content").replaceWith(s),a("#tribe-events-content").prev("#tribe-events-list-hash").remove(),a(".tribe-events-promo").next(".tribe-events-promo").remove(),0==e.max_pages&&a("#tribe-events-header").hide(),n.page_title=a("#tribe-events-header").data("title"),t.title=n.page_title,n.do_string&&history.pushState({tribe_params:n.params,tribe_url_params:n.url_params},n.page_title,r.cur_url+"?"+n.url_params),n.pushstate&&history.pushState({tribe_params:n.params,tribe_url_params:n.url_params},n.page_title,r.cur_url),l(a("#tribe-events-photo-events")),a(i).trigger("tribe_ev_ajaxSuccess").trigger("tribe_ev_photoView_AjaxSuccess"),a(i).trigger("ajax-success.tribe").trigger("photo-view-ajax-success.tribe"),_&&debug.timeEnd("Photo View Ajax Timer")}})):n.url_params.length?e.location=r.cur_url+"?"+n.url_params:e.location=r.cur_url}var d,m=o.get_url_param("tribe_paged"),h=o.get_url_param("tribe_event_display"),f=a("#tribe-events-photo-events"),w=0;if(n.view="photo",m&&(n.paged=m),"past"==h&&(n.view="past"),l(f),s.pushstate&&!s.map_view()){var x="action=tribe_photo&tribe_paged="+n.paged;r.params.length&&(x=x+"&"+r.params),n.category&&(x=x+"&tribe_event_category="+n.category),history.replaceState({tribe_params:x,tribe_url_params:r.params},"",location.href),a(e).on("popstate",function(e){var t=e.originalEvent.state;t&&(n.do_string=!1,n.pushstate=!1,n.popping=!0,n.params=t.tribe_params,n.url_params=t.tribe_url_params,o.pre_ajax(function(){c()}),o.set_form(n.params))})}a("#tribe-events").on("click","li.tribe-events-nav-next a",function(e){e.preventDefault(),n.ajax_running||("past"==n.view?"1"==n.paged?n.view="photo":n.paged--:n.paged++,n.popping=!1,o.pre_ajax(function(){c()}))}).on("click","li.tribe-events-nav-previous a",function(e){e.preventDefault(),n.ajax_running||("photo"==n.view?"1"==n.paged?n.view="past":n.paged--:n.paged++,n.popping=!1,o.pre_ajax(function(){c()}))}),(s.no_bar()||s.live_ajax()&&s.pushstate)&&a("#tribe-bar-date").on("changeDate",function(e){s.reset_on()||g(e)}),a(i).on("updating-recurrence.tribe",function(){n.popping=!1}),a("#tribe-bar-form").on("submit",function(e){"change_view"!=tribe_events_bar_action&&g(e)}),o.snap("#tribe-events-content","#tribe-events-content","#tribe-events-footer .tribe-events-nav-previous a, #tribe-events-footer .tribe-events-nav-next a"),a(i).on("run-ajax.tribe",function(){c()}),_&&debug.info("TEC Debug: tribe-events-photo-view.js successfully loaded"),n.view&&_&&debug.timeEnd("Tribe JS Init Timer")})}(window,document,jQuery,tribe_ev.data,tribe_ev.events,tribe_ev.fn,tribe_ev.state,tribe_ev.tests,tribe_js_config,tribe_debug);