var tribe_events_bar_action;!function(e,a,t,r,i,s,n,b,o){t(a).ready(function(){function l(e){if(!e.parents(".tribe-bar-disabled").length){var a=e.width();a>800?e.removeClass("tribe-bar-mini tribe-bar-collapse").addClass("tribe-bar-full"):e.removeClass("tribe-bar-full").addClass("tribe-bar-mini"),a<728?e.removeClass("tribe-bar-mini").addClass("tribe-bar-collapse"):e.removeClass("tribe-bar-collapse")}}function v(){if(tribe_events_bar_action="change_view","month"===n.view&&c.length){var r=c.val(),o=s.get_day();"0"!==n.datepicker_format?o.length?(r=tribeDateFormat(c.bootstrapDatepicker("getDate"),"tribeMonthQuery"),c.val(r+o)):c.val(""):7===r.length&&c.val(r+o)}n.url_params={},t(i).trigger("tribe_ev_preCollectBarParams"),t(i).trigger("pre-collect-bar-params.tribe");var l=t(a.getElementById("tribe-bar-form")).add(a.getElementById("tribe_events_filters_wrapper")),v=l.find("input, select");v.each(function(){var e=t(this);e.val()&&e.val().length&&!e.hasClass("tribe-no-param")&&("month"!==n.view&&"0"!==n.datepicker_format&&e.is(c)?n.url_params[e.attr("name")]=tribeDateFormat(e.bootstrapDatepicker("getDate"),"tribeQuery"):e.is(":checkbox")?e.is(":checked")&&(n.url_params[e.attr("name")]=e.val()):n.url_params[e.attr("name")]=e.val())}),n.url_params=t.param(n.url_params),t(i).trigger("tribe_ev_postCollectBarParams"),t(i).trigger("post-collect-bar-params.tribe"),n.url_params.length&&(n.cur_url+=b.starting_delim()+n.url_params),e.location.href=n.cur_url}o&&(t().bootstrapDatepicker||debug.warn("TEC Debug: vendor bootstrapDatepicker was not loaded before its dependant file tribe-events-bar.js"),t().placeholder||debug.warn("TEC Debug: vendor placeholder was not loaded before its dependant file tribe-events-bar.js"));var d=t("#tribe-bar-form"),c=t("#tribe-bar-date"),p=(t("#tribe-events"),t("#tribe-events-header")),m=0,u=t("select[name=tribe-bar-view]");if(p.length&&(m=p.data("startofweek")),l(d),d.resize(function(){l(d)}),!t(".tribe-events-week-grid").length&&"month"!==n.view){var _="yyyy-mm-dd";if("0"!==n.datepicker_format){_=r.datepicker_formats.main[n.datepicker_format];var g=s.get_url_param("tribe-bar-date");g?c.val(tribeDateFormat(g,n.datepicker_format)):"day"===n.view&&0!==c.val().length&&c.val(tribeDateFormat(c.val(),n.datepicker_format))}o&&debug.info('TEC Debug: bootstrapDatepicker was just initialized in "tribe-events-bar.js" on:',c),r.datepicker_opts={weekStart:m,format:_,autoclose:!0},c.bootstrapDatepicker(r.datepicker_opts)}c.blur(function(){""===c.val()&&t(".datepicker.dropdown-menu").is(":hidden")&&b.live_ajax()&&b.pushstate&&(n.date=r.cur_date,r.cur_url=r.base_url,t(i).trigger("tribe_ev_runAjax"),t(i).trigger("run-ajax.tribe"))}),t(".tribe-bar-settings").length&&t("#tribe-events-bar").addClass("tribe-has-settings"),t("#tribe-events-bar .hasDatepicker").length&&t("#tribe-events-bar").addClass("tribe-has-datepicker"),t('input[name*="tribe-bar-"]').placeholder(),t('<ul class="tribe-bar-views-list" />').insertAfter(u);var f=t(".tribe-bar-views-list");u.find("option").each(function(e){var a=t(this);displaying=a.data("view");var r="tribe-bar-views-option-"+a.data("view");t("<li></li>",{"class":"tribe-bar-views-option "+r,"data-tribe-bar-order":e,"data-view":displaying}).html(['   <a href="#">','   <span class="tribe-icon-'+displaying+'">'+a.text()+"</span>","</a>"].join("")).appendTo(".tribe-bar-views-list")});var h=u.find(":selected").data("view"),w=f.find("li[data-view="+h+"]");w.prependTo(f).addClass("tribe-bar-active"),d.on("click","#tribe-bar-views",function(e){e.stopPropagation();var a=t(this);a.toggleClass("tribe-bar-views-open")}),d.on("click",".tribe-bar-views-option",function(e){e.preventDefault();var a=t(this);if(!a.is(".tribe-bar-active")){var r=a.data("view");n.cur_url=t("option[data-view="+r+"]").val(),n.view_target=t('select[name=tribe-bar-view] option[value="'+n.cur_url+'"]').data("view"),tribe_events_bar_action="change_view",v()}}),d.on("change",".tribe-bar-views-select",function(e){e.preventDefault();var a=t("option:selected",this),r=a.data("view");n.cur_url=t("option[data-view="+r+"]").val(),n.view_target=t('select[name=tribe-bar-view] option[value="'+n.cur_url+'"]').data("view"),tribe_events_bar_action="change_view",v()}),d.on("click","#tribe-bar-collapse-toggle",function(){t(this).toggleClass("tribe-bar-filters-open"),t(".tribe-bar-filters").slideToggle("fast")}),t('label[for="tribe-bar-date"], input[name="tribe-bar-date"]').wrapAll('<div id="tribe-bar-dates" />'),t("#tribe-bar-filters").before(t("#tribe-bar-dates")),t(i).on("tribe_ev_serializeBar",function(){t("form#tribe-bar-form input, form#tribe-bar-form select, #tribeHideRecurrence").each(function(){var e=t(this);if(e.is("#tribe-bar-date")){var a=e.val();a.length?"month"===n.view?(n.params[e.attr("name")]=tribeDateFormat(n.mdate,"tribeMonthQuery"),n.url_params[e.attr("name")]=tribeDateFormat(n.mdate,"tribeMonthQuery")):a.match(/[0-9]{4}-[0-9]{2}/)?n.params[e.attr("name")]=n.url_params[e.attr("name")]=a:(n.params[e.attr("name")]=tribeDateFormat(e.bootstrapDatepicker("getDate"),"tribeQuery"),n.url_params[e.attr("name")]=tribeDateFormat(e.bootstrapDatepicker("getDate"),"tribeQuery")):e.is(".placeholder")&&e.is(".bd-updated")?n.url_params[e.attr("name")]=e.attr("data-oldDate"):n.date=r.cur_date}!e.val().length||e.hasClass("tribe-no-param")||e.is("#tribe-bar-date")||(e.is(":checkbox")?e.is(":checked")&&(n.params[e.attr("name")]=e.val(),"map"!==n.view&&(n.url_params[e.attr("name")]=e.val()),("month"===n.view||"day"===n.view||"week"===n.view||n.recurrence)&&n.pushcount++):(n.params[e.attr("name")]=e.val(),"map"!==n.view&&(n.url_params[e.attr("name")]=e.val()),"month"!==n.view&&"day"!==n.view&&"week"!==n.view||n.pushcount++))})});var k=t('#tribe-events-bar [class^="tribe-bar-button-"]'),D=k.next(".tribe-bar-drop-content");k.click(function(){var e=t(this);return e.toggleClass("open"),e.next(".tribe-bar-drop-content").toggle(),!1}),t(a).click(function(){t("#tribe-bar-views").removeClass("tribe-bar-views-open"),k.hasClass("open")&&(k.removeClass("open"),D.hide())}),D.click(function(e){e.stopPropagation()}),o&&debug.info("TEC Debug: tribe-events-bar.js successfully loaded")})}(window,document,jQuery,tribe_ev.data,tribe_ev.events,tribe_ev.fn,tribe_ev.state,tribe_ev.tests,tribe_debug);