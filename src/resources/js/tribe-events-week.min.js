!function(a,b,c,d,e,f,g,h,i,j){c(b).ready(function(){function j(){c(".tribe-week-grid-wrapper.tribe-scroller").nanoScroller({paneClass:"scroller-pane",sliderClass:"scroller-slider",contentClass:"scroller-content",iOSNativeScrolling:!0,alwaysVisible:!1,scrollTo:D})}function k(){var a=c(c(".tribe-week-grid-wrapper .tribe-grid-body .column").length>6?".tribe-grid-body .column:eq(5), .tribe-grid-body .column:eq(6), .tribe-grid-body .column:eq(7)":".tribe-grid-body .column:eq(4), .tribe-grid-body .column:eq(5)");a.addClass("tribe-events-right")}function l(){c(".tribe-event-placeholder").each(function(){var a=c(this).attr("data-event-id"),b=parseInt(c("#tribe-events-event-"+a).outerHeight());c(this).height(b)})}function m(){for(var a=c(".tribe-grid-allday"),b=a.find(".vevent"),d=parseInt(c(".tribe-grid-content-wrap .column").width())-8,e=1;8>e;e++)b.hasClass("tribe-dayspan"+e)&&a.find(".tribe-dayspan"+e).children("div").css("width",d*e+(4*(2*e-2)+(e-1))+"px")}function n(a){a.each(function(){var a=c(this),b=a.next(),d={left:"0",width:"65%"},e={right:"0",width:"65%"};if(b.length){var f=b.offset(),g=[f.left,f.left+b.outerWidth()],h=[f.top,f.top+b.outerHeight()],i=a.offset(),j=[i.left,i.left+a.outerWidth()],k=[i.top,i.top+a.outerHeight()];g[0]<j[1]&&g[1]>j[0]&&h[0]<k[1]&&h[1]>k[0]&&(a.is(".overlap-right")?b.css(d).addClass("overlap-left"):a.is(".overlap-left")?b.css(e).addClass("overlap-right"):(a.css(d),b.css(e).addClass("overlap-right")))}})}function o(){var a=c(".tribe-grid-body .tribe-events-mobile-day.column"),b=a.length,d=100/b;a.css("width",d+"%"),c(".tribe-grid-header .tribe-grid-content-wrap .column").css("width",d+"%"),c(".tribe-grid-allday .tribe-grid-content-wrap .column").css("width",d+"%")}function p(){var a=c(".tribe-grid-body .tribe-grid-content-wrap .column > div[id*='tribe-events-event-']"),b=c(".tribe-week-grid-inner-wrap").height(),d=5e3;a.each(function(){var a=c(this),e=a.find("a"),f=a.attr("data-hour"),g=a.attr("data-duration"),h=a.attr("data-min"),i=c('.tribe-week-grid-block[data-hour="'+f+'"]'),j=i.offset().top-i.parent().offset().top-i.parent().scrollTop();j=parseInt(Math.round(j))+parseInt(h);var k=parseInt(b)-parseInt(g)-parseInt(j);0>k&&(g=g+k-14);var l,m=e.css("height","auto").height()+5;l=m>g?m:g-16;var n=l+16,o={height:l+"px"};d>j&&(d=j,D=a),a.css({height:n+"px",top:j+"px"}),e.css(o).parent().css(o)}),a.length||(D=c(".column.tribe-week-grid-hours div:first-child")),j(),o(),c("div[id^='tribe-events-event-']").css({visibility:"visible",opacity:"0"}).delay(500).animate({opacity:"1"},{duration:250}),n(a),tribe_ev.fn.equal_height(c(".tribe-grid-header .tribe-grid-content-wrap .column")),tribe_ev.fn.equal_height(c(".tribe-grid-allday .column")),setTimeout(function(){var a=c(".tribe-grid-body").height();c(".tribe-grid-body .tribe-grid-content-wrap .column").height(a)},250)}function q(a){var b=c('.tribe-mobile-day[data-day="'+a+'"]'),d=c('.column[title="'+a+'"] .tribe-week-event');d.length&&d.each(function(){var a=c(this);if(a.tribe_has_attr("data-tribejson")){var d=a.data("tribejson");b.append(tribe_tmpl("tribe_tmpl_week_mobile",d))}})}function r(a,b){var d=c("#tribe-mobile-container"),e=c('.tribe-mobile-day[data-day="'+a+'"]');e.length?e.show():(d.append('<div class="tribe-mobile-day" data-day="'+a+'"></div>'),q(a)),e.length||(e=c('.tribe-mobile-day[data-day="'+a+'"]')),!e.find("h5").length&&e.find(".tribe-events-mobile").length&&e.prepend('<h5 class="tribe-mobile-day-date">'+b+"</h5>")}function s(){var a=c(".tribe-events-mobile-day"),b=c("#tribe-events-content > .tribe-events-grid");c("#tribe-mobile-container").length||c('<div id="tribe-mobile-container" />').insertAfter(b),a.each(function(){var a=c(this),b=a.attr("title"),d=c('.tribe-grid-content-wrap .column[title="'+b+'"]'),e=d.find("span").attr("data-full-date");r(b,e)})}function t(){w.is(".tribe-mobile")?s():(l(),m(),k(),p())}function u(a,b){if("change_view"!=tribe_events_bar_action){if(a.preventDefault(),g.ajax_running)return;var e=c("#tribe-bar-date");g.popping=!1,b?(g.date=b,d.cur_url=d.base_url+g.date+"/"):e.length&&""!==e.val()?("0"!==g.datepicker_format?g.date=tribeDateFormat(e.bootstrapDatepicker("getDate"),"tribeQuery"):g.date=e.val(),d.cur_url=d.base_url+g.date+"/"):C?d.cur_url=d.base_url+g.date+"/":(g.date=d.cur_date,d.cur_url=d.base_url+d.cur_date+"/"),f.pre_ajax(function(){v()})}}function v(){if(!f.invalid_date(g.date)){c("#tribe-events-header");c(".tribe-events-grid").tribe_spin(),g.pushcount=0,g.ajax_running=!0,g.popping||(g.filter_cats&&(d.cur_url=d.base_url),g.params={action:"tribe_week",eventDate:g.date},g.url_params={},d.default_permalinks&&(g.url_params.hasOwnProperty("eventDate")||(g.url_params.eventDate=g.date),g.url_params.hasOwnProperty("post_type")||(g.url_params.post_type=i.events_post_type),g.url_params.hasOwnProperty("eventDisplay")||(g.url_params.eventDisplay=g.view)),g.category&&(g.params.tribe_event_category=g.category),c(e).trigger("tribe_ev_serializeBar"),g.params=c.param(g.params),g.url_params=c.param(g.url_params),c(e).trigger("tribe_ev_collectParams"),g.pushstate=!0,g.do_string=!1,(g.pushcount>0||g.filters||d.default_permalinks)&&(g.pushstate=!1,g.do_string=!0)),h.pushstate?(c(e).trigger("tribe_ev_ajaxStart").trigger("tribe_ev_weekView_AjaxStart"),c.post(TribeWeek.ajaxurl,g.params,function(a){if(g.initial_load=!1,f.enable_inputs("#tribe_events_filters_form","input, select"),a.success){g.ajax_running=!1,d.ajax_response={total_count:"",view:a.view,max_pages:"",tribe_paged:"",timestamp:(new Date).getTime()};var h=c.parseHTML(a.html);c("#tribe-events-content.tribe-events-week-grid").replaceWith(h),t(),c("div[id*='tribe-events-event-']").hide().fadeIn("fast"),g.page_title=c("#tribe-events-header").data("title"),b.title=g.page_title,g.do_string&&(-1!==d.cur_url.indexOf("?")&&(d.cur_url=d.cur_url.split("?")[0]),history.pushState({tribe_url_params:g.url_params,tribe_params:g.params},g.page_title,d.cur_url+"?"+g.url_params)),g.pushstate&&history.pushState({tribe_url_params:g.url_params,tribe_params:g.params},g.page_title,d.cur_url),c(e).trigger("tribe_ev_ajaxSuccess").trigger("tribe_ev_weekView_AjaxSuccess")}})):g.url_params.length?a.location=d.cur_url+"?"+g.url_params:a.location=d.cur_url}}var w=c("body"),x=c("#tribe-bar-date"),y=c("#tribe-events"),z=c("#tribe-events-bar"),A=c("#tribe-events-header"),B=0,C=!1,D=c(".column.tribe-week-grid-hours div:first-child");Array.prototype.indexOf||(Array.prototype.indexOf=function(a){var b=this.length>>>0,c=Number(arguments[1])||0;for(c=0>c?Math.ceil(c):Math.floor(c),0>c&&(c+=b);b>c;c++)if(c in this&&this[c]===a)return c;return-1}),A.length&&(B=A.data("startofweek")),z.addClass("tribe-has-datepicker");var E=A.data("date");"0"!==g.datepicker_format&&(E=tribeDateFormat(E,"tribeQuery")),g.date=E;var F=[0,1,2,3,4,5,6],G=F.indexOf(B);G>-1&&F.splice(G,1);var H="yyyy-mm-dd";if("0"!==g.datepicker_format){H=d.datepicker_formats.main[g.datepicker_format];var I=f.get_url_param("tribe-bar-date");I&&x.val(tribeDateFormat(I,g.datepicker_format))}if(d.datepicker_opts={format:H,weekStart:B,daysOfWeekDisabled:F,autoclose:!0},x.bootstrapDatepicker(d.datepicker_opts).on("changeDate",function(a){if(!g.updating_picker){var b=tribeDateFormat(a.date,"tribeQuery");g.date=b,C=!0,(h.no_bar()||h.live_ajax()&&h.pushstate)&&(h.reset_on()||u(a,b))}}),t(),c(e).on("tribe_ev_resizeComplete",function(){t()}),h.pushstate&&!h.map_view()){var J="action=tribe_week&eventDate="+g.date;d.params.length&&(J=J+"&"+d.params),g.category&&(J=J+"&tribe_event_category="+g.category),history.replaceState({tribe_params:J,tribe_url_params:d.params},"",location.href),c(a).on("popstate",function(a){var b=a.originalEvent.state;b&&(g.do_string=!1,g.pushstate=!1,g.popping=!0,g.params=b.tribe_params,g.url_params=b.tribe_url_params,f.pre_ajax(function(){v()}),f.set_form(g.params))})}y.on("click",".tribe-events-nav-previous, .tribe-events-nav-next",function(a){if(a.preventDefault(),!g.ajax_running){var b=c(this).find("a");g.popping=!1,g.date=b.attr("data-week"),d.cur_url=b.attr("href"),"0"!==g.datepicker_format?f.update_picker(tribeDateFormat(g.date,d.datepicker_formats.main[g.datepicker_format])):f.update_picker(g.date),f.pre_ajax(function(){v()})}}),c("form#tribe-bar-form").on("submit",function(a){u(a,null)}),f.snap("#tribe-events-content","body","#tribe-events-footer .tribe-events-nav-previous, #tribe-events-footer .tribe-events-nav-next"),c(e).on("tribe_ev_runAjax",function(){v()})})}(window,document,jQuery,tribe_ev.data,tribe_ev.events,tribe_ev.fn,tribe_ev.state,tribe_ev.tests,tribe_js_config,tribe_debug);