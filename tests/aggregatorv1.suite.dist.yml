actor: Aggregatorv1Tester
modules:
  enabled:
    - \Helper\Aggregatorv1
    - REST
    - WPDb
    - WPBrowser
    - \Helper\TribeDb
    - Asserts
    - WPLoader
    - WPFilesystem
  config:
    WPDb:
      dbUrl: 'mysql://%WP_DB_USER%:%WP_DB_PASSWORD%@%WP_DB_HOST%/%WP_DB_NAME%'
      dump: tests/_data/aggregator-dump.sql
      populate: true
      cleanup: true
      url: '%WP_URL%'
      tablePrefix: wp_
      waitlock: 10
    WPBrowser:
      url: '%WP_URL%'
      adminUsername: "%WP_ADMIN_USERNAME%"
      adminPassword: '%WP_ADMIN_PASSWORD%'
      adminUrl: /wp-admin
    REST:
      depends: WPBrowser
      url: '%WP_URL%/wp-json/tribe/event-aggregator/v1/'
    WPLoader:
      # just load WordPress using the same db as WPDb
      loadOnly: true
      wpRootFolder: "%WP_ROOT_FOLDER%"
      dbUrl: 'mysql://%WP_DB_USER%:%WP_DB_PASSWORD%@%WP_DB_HOST%/%WP_DB_NAME%'
    WPFilesystem:
      wpRootFolder: "%WP_ROOT_FOLDER%"

